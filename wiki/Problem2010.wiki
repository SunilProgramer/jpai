#labels Featured
=Pipe Control=
----
==Условие==

|| *Входной файл:* || input.txt ||
|| *Выходной файл:* || output.txt ||
|| *Временный файл:* || temp.txt ||
|| *Время:* || 2-3 сек. ||

В игре участвует 2 или более игроков, соревнующихся за контроль над системой трубопроводов.

Игровое поле представляет собой прямоугольник шириной W и высотой H клеток. Каждая клетка содержит сегмент трубы, состоящий из от 0 до 4 отрезков, соединяющих центр клетки с серединой каждой стороны. Две клетки, имеющие общую сторону, называются смежными, если центр каждой из них соединен отрезком трубы с серединой этой общей стороны.

Каждая клетка может быть зафиксированной или не зафиксированной, а также принадлежать одному из игроков либо не принадлежать никому.

Игроки ходят по очереди. Ход состоит в том, что игрок выбирает незафиксированную клетку и поворачивает находящийся в ней сегмент трубы на угол, кратный 90°. После этого:
  # Выбранная клетка становится зафиксированной.
  # Выбранная клетка переходит к текущему игроку.
  # Все клетки, ещё не принадлежащие ни одному игроку и соединённые с выбранной цепочкой смежных клеток, также переходят к текущему игроку.

Игра продолжается либо до истечения фиксированного числа ходов, либо до тех пор, пока все клетки не станут зафиксированными.

Побеждает игрок, которому принадлежит наибольшее количество клеток.

==Формат входного файла==

Формат входного и выходного файла предполагает, что текущий игрок -- первый.

В первой строке входного файла находятся числа W H P L, где
  * W -- ширина поля,
  * H -- высота поля,
  * P -- число игроков,
  * L -- количество ходов, оставшихся до принудительного окончания игры.

Следующие H строк содержат по W чисел, описывающих состояние поля. Каждое число состоит из 6 десятичных цифр, обозначающих, от старшей к младшей:
  # Номер игрока (от 1 до P или 0)
  # Признак фиксации (0 или 1)
  # Наличие верхнего отрезка трубы (0 или 1)
  # Наличие правого отрезка трубы (0 или 1)
  # Наличие нижнего отрезка трубы (0 или 1)
  # Наличие левого отрезка трубы (0 или 1)

===Пример:===

{{{
3 2 2 100
110110 100001 211010
101000 000000 201010
}}}
http://i1030.photobucket.com/albums/y362/shigidono/jpai/test-rendered.png

==Формат выходного файла==
Выходной файл должен содержать три числа x y d, где x y -- номер столбца и номер строки клетки, d -- число от 0 до 3, обозначающее количество поворотов на 90° по часовой стрелке, которые надо проделать с клеткой в координатах (x, y) перед фиксацией.

===Пример:===
{{{
2 3 1
}}}
----
*Некорректные данные в выходном файле приводят к пропуску хода.*